# 前端数据采集 sdk

## 模型问题

用户模型，页面模型，设备模型，事件模型

用户模型

    用户标识：web 端用户标识如何确认

页面模型

    domain // 域名
    url 当前 URL 地址
    title // 当前页面标题
    referrer // 上一个访问页面 URL 地址
    sh // 当前屏幕高度
    sw // 当前屏幕宽度
    // navigator

设备模型

      ua
      browser
      device desktop 还是mobile ,tablet
      os win iOS ,Android,
      设备的唯一标识如何确认

事件模型

- Who：即参与这个事件的用户是谁。
- When：即这个事件发生的实际时间。
- Where：即事件发生的地点或位置。看怎么定义，神策是定义的地点，即城市等，个人觉得发生的页面位置也可以。
- How：即用户从事这个事件的方式。这个概念就比较广了，包括用户使用的设备、使用的浏览器、使用的 App 版本、操作系统版本、进入的渠道、跳转过来时的 referer 等。

- What：描述用户所做的这个事件的具体内容。

      eventID ,eventName
      browser
      device desktop 还是mobile ,tablet
      os win iOS ,Android

1. 我们要采集什么内容，进行哪些采集接口的约定
2. 业务方通过什么方式来调用我们的采集脚本
3. 手动埋点：SDK 需要封装一个方法给业务方进行调用，传参方式业务方可控
4. 设备标识：用户通过浏览器来访问 web 页面，设备 Id 需要存储在浏览器上，同一个用户访问不同的业务方网站，设备 Id 要保持一样，怎么实现
5. 单页面应用：现在流行的单页面应用和普通 web 页面的数据采集是否有差异
6. 混合应用：app 与 h5 的混合应用我们要怎么进行通讯
7. 小程序应用：oa 中的应用，其实就是一个小程序，

## oa 问题

oa 中的应用按照哪种方式，类似微信小程序这种单独的应用

还是 oa 中的一个功能点，这两种是完全不同的实现方式。而且统计的内容也会有区别

比如 pv 页面访问量，启动次数,如果按照单独的应用那 pv 增加，oa 的 pv 不会增加，启动两次，oa 的启动次数还是一次，

如果按照 oa 的功能点来算，那 pv+1，oa 对应 pv 也要+1，但是这时候 oa 应用就可能无法统计启动次数了。

## 关于请求

采用 get 还是 post?还是要都支持，肯定会跨域

## web js sdk

sdk 同样也是一个产品，这一块也要有产品原型，涉及到多端，第一迭代应该将终端和 web 端

产品定义 sdk 统计维度

混合端上报方式

由 H5 直接上报 server 端，还是 h5 从 android 获取基本信息后 h5 端上报，
神策数据是通过 app 端上报的（https://manual.sensorsdata.cn/sa/latest/tech_sdk_client_link-1573913.html）

结合实际 oa 实际需求，先开发混合 app 模式 sdk，再开发纯 web sdk，支持 oa 应用独立上报

上报数据方式，上报报文比较长，采用的是 post，上报会跨域，server 端 需要开启跨域
